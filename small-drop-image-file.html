<!DOCTYPE html>
<meta charset="UTF-8">
<html lang="en" xml:lang="en">

<head>
    <title>Berit</title>
    <link rel="stylesheet" href="style.css">
    <script type="module">
        import { dropHandler, dragOverHandler, adjustCanvas, delayedAdjustCanvas, adjustOpacity } from "./built/imageDrop.js";
        addEventListener("load", function () { adjustCanvas(); });
        addEventListener("resize", function () { delayedAdjustCanvas(); });
        document.getElementById("viewport")
            .addEventListener("drop", function () { dropHandler(event); });
        document.getElementById("viewport")
            .addEventListener("dragover", function () { dragOverHandler(event); });
        document.getElementById("opacitySlider")
            .addEventListener("change", function () { adjustOpacity(this.value) });
    </script>

    <script type="module">import { addPositivePolygonArea, addNegativePolygonArea, addRuler, removeSelectedShape, canvasMouseMovement, canvasLeftClicked, canvasRightClicked, canvasMouseDown, canvasMouseUp } from "./built/main.js";
        document.getElementById("foreground")
            .addEventListener("click", function () { canvasLeftClicked(event, this.id); });
        document.getElementById("foreground")
            .addEventListener("mousemove", function () { canvasMouseMovement(event, this.id); });
        document.getElementById("foreground")
            .addEventListener("mousedown", function () { canvasMouseDown(event, this.id); });
        document.getElementById("foreground")
            .addEventListener("mouseup", function () { canvasMouseUp(event, this.id); });
        document.getElementById("foreground")
            .addEventListener("contextmenu", function () { canvasRightClicked(event, this.id); });
        document.getElementById("addPositivePolygon")
            .addEventListener("click", function () { addPositivePolygonArea(true); });
        document.getElementById("addNegativePolygon")
            .addEventListener("click", function () { addNegativePolygonArea(false); });
        document.getElementById("addRuler")
            .addEventListener("click", function () { addRuler(); });
        document.getElementById("removeSelectedShape")
            .addEventListener("click", function () { removeSelectedShape(); });
    </script>
</head>

<body>
    Create non-complex polygons<br><br>
    <button id="addPositivePolygon">Add positive polygon</button>
    <button id="addNegativePolygon">Add negative polygon</button>
    <button id="addRuler">Add ruler</button>
    <button id="removeSelectedShape">Remove selected shape</button>
    <br><br>
    <input type="range" min="0" max="100" value="50" class="slider" id="opacitySlider"><br>
    <div id="viewport">
        <canvas id="filterLayer"></canvas>
        <canvas id="imageLayer"></canvas>
        <canvas id="background"></canvas>
        <canvas id="foreground"></canvas>
    </div>
    <div id="data">Area total: 0</div>
</body>

</html>